{% extends "base.html" %}

{% block title %}User Management{% endblock %}

{% block extra_head %}
<script src="/static/users.js" defer></script>
<link rel="stylesheet" href="/static/users.css">
{% endblock %}

{% block content %}

<div class="user-cards-container">
    {% for user in users %}
    <div class="user-card">
        <div class="user-card-header">
            <h3 class="user-id">ID: {{ user.id }}</h3>
            <h2 class="user-username">{{ user.username }}</h2>
        </div>
        <div class="user-status">
            <label class="switch">
                <input type="checkbox" class="status-toggle" data-user-id="{{ user.id }}" {% if user.has_access %}checked{% endif %}>
                <span class="slider"></span>
            </label>
            <p class="status-label">
                {% if user.has_access %}
                    Доступ открыт
                {% else %}
                    Доступ закрыт
                {% endif %}
            </p>
        </div>
    </div>
    {% endfor %}
</div>

<div class="pagination">
    {% if current_page > 1 %}
    <a href="?page={{ current_page - 1 }}" class="pagination-button">Назад</a>
    {% endif %}

    {% if start_page > 1 %}
    <a href="?page=1" class="pagination-button">1</a>
    {% if start_page > 2 %}
    <span class="pagination-ellipsis">...</span>
    {% endif %}
    {% endif %}

    {% for page in range(start_page, end_page + 1) %}
    <a href="?page={{ page }}" class="pagination-button {% if page == current_page %}active{% endif %}">{{ page }}</a>
    {% endfor %}

    {% if end_page < total_pages %}
    {% if end_page < total_pages - 1 %}
    <span class="pagination-ellipsis">...</span>
    {% endif %}
    <a href="?page={{ total_pages }}" class="pagination-button">{{ total_pages }}</a>
    {% endif %}

    {% if current_page < total_pages %}
    <a href="?page={{ current_page + 1 }}" class="pagination-button">Вперед</a>
    {% endif %}
</div>

{% endblock %}